parameters:
- name: isOfficialBuild
  type: boolean
- name: rootFolder
  type: string
  default: ''
- name: includeRootFolder
  type: boolean
  default: false
- name: archiveType
  type: string
  default: ''
- name: tarCompression
  type: string
  default: ''
- name: archiveExtension
  type: string
  default: ''
- name: artifactName
  type: string
  default: ''
- name: displayName
  type: string
  default: ''
- name: condition
  type: boolean
  default: succeeded()

steps:
  # Zip Artifact
  - task: ArchiveFiles@2
    displayName: 'Zip ${{ parameters.displayName }}'
    inputs:
      rootFolderOrFile:  ${{ parameters.rootFolder }}
      archiveFile:       $(Build.StagingDirectory)/${{ parameters.artifactName }}${{ parameters.archiveExtension }}
      archiveType:       ${{ parameters.archiveType }}
      tarCompression:    ${{ parameters.tarCompression }}
      includeRootFolder: ${{ parameters.includeRootFolder }}
    condition: ${{ parameters.condition }}

  - template: /eng/pipelines/common/templates/publish-build-artifacts.yml
    parameters:
      isOfficial: ${{ parameters.isOfficialBuild }}
      displayName: 'Publish ${{ parameters.displayName }}'
      inputs:
        PathtoPublish: $(Build.StagingDirectory)/${{ parameters.artifactName }}${{ parameters.archiveExtension }}
        artifactName:  ${{ parameters.artifactName }}
      condition: ${{ parameters.condition }}